# Verdure Assistant 控制面板

这是Verdure Assistant机器人的Web控制面板，提供了完整的机器人控制功能，包括表情动作控制和语音对话功能。

## 功能特性

### 🤖 机器人表情动作控制
- **表情类型**: 支持6种基本表情（平静、快乐、悲伤、愤怒、惊讶、困惑）
- **播放模式**: 
  - 表情+动作同步播放
  - 仅播放表情动画
  - 仅播放机器人动作
- **自定义参数**: 可设置循环次数和帧率
- **控制命令**: 停止播放、清除屏幕、初始化机器人、运行演示

### 🎤 语音对话功能
- **连接管理**: 初始化、开始/停止对话、断开连接
- **对话模式**: 支持自动对话模式和手动模式
- **文本交互**: 可直接发送文本消息进行对话
- **状态监控**: 实时显示连接状态和对话状态

### 🎵 音乐播放控制
- **音乐搜索**: 支持歌曲名称搜索和播放
- **播放控制**: 播放/暂停、停止、恢复
- **音量控制**: 可调节播放音量(0-100%)
- **进度控制**: 支持跳转到指定播放位置
- **歌词显示**: 获取并显示当前歌曲歌词
- **缓存管理**: 清理音乐缓存文件

### 🦾 机器人关节控制
- **关节操作**: 可单独控制机器人的各个关节
- **角度设置**: 精确设置关节角度(-180° 到 180°)
- **状态监控**: 实时查看关节状态和显示器状态

### 📊 系统监控
- **实时状态**: 显示所有子系统的连接状态
- **自动刷新**: 每30秒自动更新系统状态
- **操作日志**: 详细记录所有操作和结果
- **日志管理**: 支持清空日志和导出日志文件

## 使用方法

1. **启动API服务**: 确保Verdure.Assistant.Api服务正在运行
2. **访问控制面板**: 在浏览器中打开 `http://localhost:5000` (或对应的API服务地址)
3. **初始化系统**: 点击各个模块的初始化按钮
4. **开始使用**: 根据需要使用各种控制功能

## 支持的API接口

### 表情动作API (`/api/emotion`)
- `POST /play` - 播放指定表情和动作
- `POST /play-emotion/{emotionType}` - 仅播放表情
- `POST /play-action/{emotionType}` - 仅播放动作
- `POST /play-random` - 播放随机表情
- `POST /stop` - 停止播放
- `POST /clear` - 清除屏幕
- `POST /initialize` - 初始化机器人
- `POST /demo` - 运行演示
- `GET /status` - 获取状态
- `GET /emotions` - 获取可用表情列表
- `GET /joints` - 获取关节状态
- `POST /joints/{channel}/move` - 移动关节
- `GET /displays` - 获取显示器状态

### 语音对话API (`/api/voicechat`)
- `POST /initialize` - 初始化语音聊天服务
- `POST /start` - 开始语音对话
- `POST /stop` - 停止语音对话
- `POST /toggle` - 切换对话状态
- `POST /send-text` - 发送文本消息
- `POST /auto-mode` - 设置自动对话模式
- `POST /disconnect` - 断开连接
- `GET /status` - 获取连接状态

### 音乐播放API (`/api/music`)
- `GET /search` - 搜索歌曲
- `POST /search-and-play` - 搜索并播放
- `POST /play` - 播放指定音乐
- `POST /toggle` - 切换播放/暂停
- `POST /pause` - 暂停播放
- `POST /resume` - 恢复播放
- `POST /stop` - 停止播放
- `POST /seek` - 跳转到指定位置
- `POST /volume` - 设置音量
- `GET /status` - 获取播放状态
- `GET /lyrics` - 获取歌词
- `POST /clear-cache` - 清理缓存

## 技术特性

- **响应式设计**: 支持桌面和移动设备
- **实时更新**: 自动刷新系统状态
- **错误处理**: 完善的错误提示和日志记录
- **用户友好**: 直观的操作界面和状态指示
- **功能完整**: 覆盖机器人的所有控制功能

## 注意事项

1. 确保API服务已正确配置并运行
2. 某些功能需要相应的硬件支持（如音频设备、舵机等）
3. 网络连接状态会影响语音对话功能
4. 音乐播放功能需要网络连接来搜索和下载歌曲

## 故障排除

- **连接失败**: 检查API服务是否运行，确认端口号正确
- **功能无响应**: 查看操作日志获取详细错误信息
- **状态更新异常**: 尝试手动刷新状态或重新加载页面

---

这个控制面板基于Verdure.Assistant项目的实际API接口开发，确保所有功能都与后端服务匹配。
